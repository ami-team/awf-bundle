(()=>{"use strict";$AMIClass("BookmarkBoxCtrl",{$extends:ami.Control,$init:function(t,s){this.$super.$init(t,s)},onReady:function(){const t=$.Deferred();return amiWebApp.appendHTML("body",'<div class="modal fade" data-backdrop="static" role="dialog" id="A3B9F992_0B7B_82B4_BDD0_E4EF2AF2E197">\n\t<div class="modal-dialog modal-xl" role="document">\n\t\t<div class="modal-content">\n\t\t\t<div class="modal-header">\n\t\t\t\t<h4 class="modal-title"><i class="bi bi-star-fill"></i> New Bookmark</h4>\n\t\t\t</div>\n\t\t\t<div class="modal-body">\n\t\t\t\t<div class="mb-2">\n\t\t\t\t\t<label class="form-label" for="DDE98A9F_46A2_F340_F7D8_74F2D1704714">Bookmark name<sup class="text-danger">*</sup></label>\n\t\t\t\t\t<input class="form-control form-control-sm" type="text" id="DDE98A9F_46A2_F340_F7D8_74F2D1704714" />\n\t\t\t\t</div>\n\t\t\t\t<div class="mb-2">\n\t\t\t\t\t<label class="form-label" for="AC86FF11_7805_C85E_7411_F061BA049208">JSON <button class="btn btn-sm btn-primary" data-bs-toggle="collapse" data-bs-target="#EBABE58F_47EC_314C_5386_280E9D8A32A7">view/hide</button></label>\n\t\t\t\t\t<div class="collapse show" id="EBABE58F_47EC_314C_5386_280E9D8A32A7">\n\t\t\t\t\t\t<select class="form-editor" data-lang="json" data-read-only="true" id="AC86FF11_7805_C85E_7411_F061BA049208"></select>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="mb-2">\n\t\t\t\t\t<label class="form-label" for="CEB66D23_8782_A96F_A8B6_139AC2A48875">Share (public bookmark)<sub class="text-danger">*</sub></label>\n\t\t\t\t\t<div class="switch switch-sm switch-off-primary switch-on-success">\n\t\t\t\t\t\t<input type="checkbox" id="CEB66D23_8782_A96F_A8B6_139AC2A48875">\n\t\t\t\t\t\t<label for="CEB66D23_8782_A96F_A8B6_139AC2A48875">\n\t\t\t\t\t\t\t<span class="text-primary">no</span>\n\t\t\t\t\t\t\t/\n\t\t\t\t\t\t\t<span class="text-success">yes</span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="modal-footer">\n\t\t\t\t<button type="button" class="btn btn-outline-secondary" id="F43F294B_B664_4883_0691_2EAEC8B8B3BB">Close</button>\n\t\t\t\t-\n\t\t\t\t<button type="button" class="btn btn-success" id="E335D6CC_ADA1_92CF_1C64_F446B27B5F93">Add Bookmark</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n').done((()=>{const s=this.$class;$("#F43F294B_B664_4883_0691_2EAEC8B8B3BB").on("click",(()=>{amiWebApp.modalLeave(),$("#A3B9F992_0B7B_82B4_BDD0_E4EF2AF2E197").modal("hide"),s.deferred.resolveWith(s.context||s.deferred,[null])})),$("#E335D6CC_ADA1_92CF_1C64_F446B27B5F93").on("click",(()=>{const t=$("#DDE98A9F_46A2_F340_F7D8_74F2D1704714").val().trim(),a=$("#CEB66D23_8782_A96F_A8B6_139AC2A48875").prop("checked")?"1":"0";if(t){const e={subapp:s.subapp,userdata:JSON.stringify(s.userdata)};amiWebApp.lock(),amiCommand.execute("AddHash -name=? -shared=? -json=?",{params:[t,a,JSON.stringify(e)]}).done((()=>{amiLogin.update().always((()=>{amiWebApp.unlock(),amiWebApp.modalLeave(),$("#A3B9F992_0B7B_82B4_BDD0_E4EF2AF2E197").modal("hide"),s.deferred.rejectWith(s.context||s.deferred,[t])}))})).fail(((t,s)=>{amiWebApp.error(s,!0)}))}})),t.resolve()})),t},render:function(t,s,a){const e=$.Deferred(),[n,l]=amiWebApp.setup(["context","name"],[e,""],a);let o;try{o="Object"===amiWebApp.typeOf(s)?s:JSON.parse(s)}catch(t){o={}}return $("#DDE98A9F_46A2_F340_F7D8_74F2D1704714").val(l||""),$("#AC86FF11_7805_C85E_7411_F061BA049208").val(JSON.stringify(o,null,2)||"{}"),$("#EBABE58F_47EC_314C_5386_280E9D8A32A7").collapse("show"),$("#A3B9F992_0B7B_82B4_BDD0_E4EF2AF2E197").modal("show"),this.$class.deferred=e,this.$class.context=n,this.$class.subapp=t,this.$class.userdata=o,amiWebApp.modalEnter(),e.promise()},show:function(t,s){return this.render(t,s)}})})();