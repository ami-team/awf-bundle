import{i as e,r as a,a as s,o as t,b as _,c as l,d as r,e as n,w as c,f as o,u as i,_ as m,F as d,g as u,t as h}from"./app.min.js";const p={class:"container d-flex flex-column h-100 py-2"},v={class:"card card-shadow bg-black h-100"},b={class:"d-flex card-body flex-column h-100"},k=r("nav",{class:"flex-grow-0 mb-2"},[r("div",{class:"nav nav-tabs",role:"tablist"},[r("button",{class:"nav-link active px-2 py-1",type:"button","data-bs-toggle":"tab","data-bs-target":"#nav-mqtt",role:"tab"},"mqtt"),r("button",{class:"nav-link xxxxxx px-2 py-1",type:"button","data-bs-toggle":"tab","data-bs-target":"#nav-logs",role:"tab"},"logs")])],-1),x={class:"tab-content flex-grow-1"},f={class:"form-check form-check-inline text-white"},g=r("label",{class:"form-check-label",for:"showPings"},"Pings",-1),w={class:"form-check form-check-inline text-white"},y=r("label",{class:"form-check-label",for:"showTasks"},"Tasks",-1),N={class:"dropdown me-2"},E=r("button",{class:"btn btn-outline-primary dropdown-toggle",type:"button","data-bs-toggle":"dropdown"},[r("i",{class:"bi bi-arrow-repeat"})],-1),P={class:"dropdown-menu"},C=["onClick"],D={__name:"HomeView",setup(D){const I=e("toast"),L=e("mqttClient"),O=a({serverNames:[]});let T=null,G=null;const q=s(null),K=s(null);t((()=>{return e=this,a=null,s=function*(){L.connect((()=>{L.subscribe("ami/taskserver/task"),L.execute("ListTaskServers").then((e=>{O.serverNames=L.jspath('..field{.@name==="name"}.$',e.data)})).catch((e=>{I("error",e.message)}))}),((e,a,s)=>{"ami/taskserver/ping"===a?q.value.checked&&T.write(`[32m${a}[0m: `+s.replace('"UNLOCKED"','"[92;1mUNLOCKED[0m"').replace('"LOCKED"','"[90;1mLOCKED[0m"')+"\n\n"):"ami/taskserver/task"===a&&K.value.checked&&T.write(`[32m${a}[0m: `+s.replace('"RUNNING"','"[92;1mRUNNING[0m"').replace('"PENDING"','"[94;1mPENDING[0m"').replace('"ZOMBIE"','"[90;1mZOMBIE[0m"')+"\n\n")}),null).catch((e=>{I("error",e.message)}))},new Promise(((t,_)=>{var l=e=>{try{n(s.next(e))}catch(a){_(a)}},r=e=>{try{n(s.throw(e))}catch(a){_(a)}},n=e=>e.done?t(e.value):Promise.resolve(e.value).then(l,r);n((s=s.apply(e,a)).next())}));var e,a,s}));return(e,a)=>(_(),l("div",p,[r("div",v,[r("div",b,[k,r("div",x,[n(i(m),{id:"nav-mqtt",active:!0,clear:!0,prompt:"     _    __  __ ___   _____         _      ____\n    / \\  |  \\/  |_ _| |_   _|_ _ ___| | __ / ___|  ___ _ ____   _____ _ __\n   / _ \\ | |\\/| || |    | |/ _` / __| |/ / \\___ \\ / _ \\ '__\\ \\ / / _ \\ '__|\n  / ___ \\| |  | || |    | | (_| \\__ \\   <   ___) |  __/ |   \\ V /  __/ |\n /_/   \\_\\_|  |_|___|   |_|\\__,_|___/_|\\_\\ |____/ \\___|_|    \\_/ \\___|_|\n\n",onReady:a[0]||(a[0]=e=>o(T)?T.value=e:T=e)},{default:c((()=>[r("div",f,[r("input",{class:"form-check-input",type:"checkbox",id:"showPings",ref_key:"showPings",ref:q,xxxxxxx:""},null,512),g]),r("div",w,[r("input",{class:"form-check-input",type:"checkbox",id:"showTasks",ref_key:"showTasks",ref:K,checked:""},null,512),y])])),_:1}),n(i(m),{id:"nav-logs",active:!1,clear:!0,onReady:a[1]||(a[1]=e=>o(G)?G.value=e:G=e)},{default:c((()=>[r("div",N,[E,r("ul",P,[(_(!0),l(d,null,u(O.serverNames,(e=>(_(),l("li",{key:e},[r("a",{class:"dropdown-item",href:"#",onClick:a=>(e=>{L.execute("GetServerLogs",{serverName:e}).then((e=>{const a=L.jspath('..field{.@name==="logs"}.$',e.data)[0]||"@EMPTY";G.clear(),G.write(a)})).catch((e=>{I("error",e.message)}))})(e)},h(e),9,C)])))),128))])])])),_:1})])])])]))}};export{D as default};
