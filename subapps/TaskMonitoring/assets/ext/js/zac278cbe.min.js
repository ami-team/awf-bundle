var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,r=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,u=(e,a)=>{for(var l in a||(a={}))s.call(a,l)&&r(e,l,a[l]);if(t)for(var l of t(a))i.call(a,l)&&r(e,l,a[l]);return e};import{b as n,c as o,d as c,q as d,L as v,M as p,n as m,F as b,g as f,G as g,N as h,j as y,t as k,O as x,P as S,a as _,p as L,E as O,Q as w,o as E,s as C,i as T,r as B,h as q,e as D,w as P,u as A,f as I,v as R,C as j,x as F,R as V,_ as N}from"./app.min.js";import{a as $,b as M,t as K,_ as H}from"./z7616e8e1.min.js";function G(e){return-1!==[null,void 0].indexOf(e)}function U(e,a,l){const{object:t,valueProp:s,mode:i}=x(e),r=S().proxy,u=l.iv,n=e=>t.value||G(e)?e:Array.isArray(e)?e.map((e=>e[s.value])):e[s.value],o=e=>G(e)?"single"===i.value?{}:[]:e;return{update:(e,l=!0)=>{u.value=o(e);const t=n(e);a.emit("change",t,r),l&&(a.emit("input",t),a.emit("update:modelValue",t))}}}function z(e,a){const{value:l,modelValue:t,mode:s,valueProp:i}=x(e),r=_("single"!==s.value?[]:{}),u=t&&void 0!==t.value?t:l,n=L((()=>"single"===s.value?r.value[i.value]:r.value.map((e=>e[i.value])))),o=L((()=>"single"!==s.value?r.value.map((e=>e[i.value])).join(","):r.value[i.value]));return{iv:r,internalValue:r,ev:u,externalValue:u,textValue:o,plainValue:n}}function W(e,a,l){const{regex:t}=x(e),s=S().proxy,i=l.isOpen,r=l.open,u=_(null),n=_(null);return O(u,(e=>{!i.value&&e&&r(),a.emit("search-change",e,s)})),{search:u,input:n,clearSearch:()=>{u.value=""},handleSearchInput:e=>{u.value=e.target.value},handleKeypress:e=>{if(t&&t.value){let a=t.value;"string"==typeof a&&(a=new RegExp(a)),e.key.match(a)||e.preventDefault()}},handlePaste:e=>{if(t&&t.value){let a=(e.clipboardData||window.clipboardData).getData("Text"),l=t.value;"string"==typeof l&&(l=new RegExp(l)),a.split("").every((e=>!!e.match(l)))||e.preventDefault()}a.emit("paste",e,s)}}}function Y(e,a,l){const{groupSelect:t,mode:s,groups:i,disabledProp:r}=x(e),u=_(null),n=e=>{void 0===e||null!==e&&e[r.value]||i.value&&e&&e.group&&("single"===s.value||!t.value)||(u.value=e)};return{pointer:u,setPointer:n,clearPointer:()=>{n(null)}}}function Z(e,a=!0){return a?String(e).toLowerCase().trim():String(e).toLowerCase().normalize("NFD").trim().replace(new RegExp(/æ/g),"ae").replace(new RegExp(/œ/g),"oe").replace(new RegExp(/ø/g),"o").replace(new RegExp("\\p{Diacritic}","gu"),"")}function J(e,t,s){const{options:i,mode:r,trackBy:n,limit:o,hideSelected:c,createTag:d,createOption:v,label:p,appendNewTag:m,appendNewOption:b,multipleLabel:f,object:g,loading:h,delay:y,resolveOnLoad:k,minChars:w,filterResults:E,clearOnSearch:C,clearOnSelect:T,valueProp:B,canDeselect:q,max:D,strict:P,closeOnSelect:A,groups:I,reverse:R,infinite:j,groupOptions:F,groupHideEmpty:V,groupSelect:N,onCreate:$,disabledProp:M,searchStart:K}=x(e),H=S().proxy,U=s.iv,z=s.ev,W=s.search,Y=s.clearSearch,J=s.update,Q=s.pointer,X=s.clearPointer,ee=s.focus,ae=s.deactivate,le=s.close,te=_([]),se=_([]),ie=_(!1),re=_(null),ue=_(j.value&&-1===o.value?10:o.value),ne=L((()=>d.value||v.value||!1)),oe=L((()=>void 0!==m.value?m.value:void 0===b.value||b.value)),ce=L((()=>{if(I.value){let e=se.value||[],a=[];return e.forEach((e=>{Ve(e[F.value]).forEach((l=>{a.push(Object.assign({},l,e[M.value]?{[M.value]:!0}:{}))}))})),a}{let e=Ve(se.value||[]);return te.value.length&&(e=e.concat(te.value)),e}})),de=L((()=>I.value?je((se.value||[]).map(((e,t)=>{const s=Ve(e[F.value]);return i=u({},e),r={index:t,group:!0,[F.value]:Fe(s,!1).map((a=>Object.assign({},a,e[M.value]?{[M.value]:!0}:{}))),__VISIBLE__:Fe(s).map((a=>Object.assign({},a,e[M.value]?{[M.value]:!0}:{})))},a(i,l(r));var i,r}))):[])),ve=L((()=>{let e=ce.value;return R.value&&(e=e.reverse()),he.value.length&&(e=he.value.concat(e)),Fe(e)})),pe=L((()=>{let e=ve.value;return ue.value>0&&(e=e.slice(0,ue.value)),e})),me=L((()=>{switch(r.value){case"single":return!G(U.value[B.value]);case"multiple":case"tags":return!G(U.value)&&U.value.length>0}})),be=L((()=>void 0!==f&&void 0!==f.value?f.value(U.value,H):U.value&&U.value.length>1?`${U.value.length} options selected`:"1 option selected")),fe=L((()=>!ce.value.length&&!ie.value&&!he.value.length)),ge=L((()=>ce.value.length>0&&0==pe.value.length&&(W.value&&I.value||!I.value))),he=L((()=>!1!==ne.value&&W.value?-1!==Ie(W.value)?[]:[{[B.value]:W.value,[p.value]:W.value,[ye.value]:W.value,__CREATE__:!0}]:[])),ye=L((()=>n.value||p.value)),ke=L((()=>{switch(r.value){case"single":return null;case"multiple":case"tags":return[]}})),xe=L((()=>h.value||ie.value)),Se=e=>{switch("object"!=typeof e&&(e=Ae(e)),r.value){case"single":J(e);break;case"multiple":case"tags":J(U.value.concat(e))}t.emit("select",Le(e),e,H)},_e=e=>{switch("object"!=typeof e&&(e=Ae(e)),r.value){case"single":we();break;case"tags":case"multiple":J(Array.isArray(e)?U.value.filter((a=>-1===e.map((e=>e[B.value])).indexOf(a[B.value]))):U.value.filter((a=>a[B.value]!=e[B.value])))}t.emit("deselect",Le(e),e,H)},Le=e=>g.value?e:e[B.value],Oe=e=>{_e(e)},we=()=>{t.emit("clear",H),J(ke.value)},Ee=e=>{if(void 0!==e.group)return"single"!==r.value&&(Pe(e[F.value])&&e[F.value].length);switch(r.value){case"single":return!G(U.value)&&U.value[B.value]==e[B.value];case"tags":case"multiple":return!G(U.value)&&-1!==U.value.map((e=>e[B.value])).indexOf(e[B.value])}},Ce=e=>!0===e[M.value],Te=()=>!(void 0===D||-1===D.value||!me.value&&D.value>0)&&U.value.length>=D.value,Be=e=>{switch(e.__CREATE__&&delete(e=u({},e)).__CREATE__,r.value){case"single":if(e&&Ee(e))return void(q.value&&_e(e));e&&qe(e),T.value&&Y(),A.value&&(X(),le()),e&&Se(e);break;case"multiple":if(e&&Ee(e))return void _e(e);if(Te())return void t.emit("max",H);e&&(qe(e),Se(e)),T.value&&Y(),c.value&&X(),A.value&&le();break;case"tags":if(e&&Ee(e))return void _e(e);if(Te())return void t.emit("max",H);e&&qe(e),T.value&&Y(),e&&Se(e),c.value&&X(),A.value&&le()}A.value||ee()},qe=e=>{void 0===Ae(e[B.value])&&ne.value&&(t.emit("tag",e[B.value],H),t.emit("option",e[B.value],H),oe.value&&Re(e),Y())},De=e=>void 0===e.find((e=>!Ee(e)&&!e[M.value])),Pe=e=>void 0===e.find((e=>!Ee(e))),Ae=e=>ce.value[ce.value.map((e=>String(e[B.value]))).indexOf(String(e))],Ie=(e,a=!0)=>ce.value.map((e=>parseInt(e[ye.value])==e[ye.value]?parseInt(e[ye.value]):e[ye.value])).indexOf(parseInt(e)==e?parseInt(e):e),Re=e=>{te.value.push(e)},je=e=>V.value?e.filter((e=>W.value?e.__VISIBLE__.length:e[F.value].length)):e.filter((e=>!W.value||e.__VISIBLE__.length)),Fe=(e,a=!0)=>{let l=e;return W.value&&E.value&&(l=l.filter((e=>K.value?Z(e[ye.value],P.value).startsWith(Z(W.value,P.value)):-1!==Z(e[ye.value],P.value).indexOf(Z(W.value,P.value))))),c.value&&a&&(l=l.filter((e=>!(e=>-1!==["tags","multiple"].indexOf(r.value)&&c.value&&Ee(e))(e)))),l},Ve=e=>{let a=e;var l;return l=a,"[object Object]"===Object.prototype.toString.call(l)&&(a=Object.keys(a).map((e=>{let l=a[e];return{[B.value]:e,[ye.value]:l,[p.value]:l}}))),a=a.map((e=>"object"==typeof e?e:{[B.value]:e,[ye.value]:e,[p.value]:e})),a},Ne=()=>{G(z.value)||(U.value=Ke(z.value))},$e=e=>(ie.value=!0,new Promise(((a,l)=>{i.value(W.value,H).then((a=>{se.value=a||[],"function"==typeof e&&e(a),ie.value=!1})).catch((e=>{console.error(e),se.value=[],ie.value=!1})).finally((()=>{a()}))}))),Me=()=>{if(me.value)if("single"===r.value){let e=Ae(U.value[B.value]);if(void 0!==e){let a=e[p.value];U.value[p.value]=a,g.value&&(z.value[p.value]=a)}}else U.value.forEach(((e,a)=>{let l=Ae(U.value[a][B.value]);if(void 0!==l){let e=l[p.value];U.value[a][p.value]=e,g.value&&(z.value[a][p.value]=e)}}))},Ke=e=>G(e)?"single"===r.value?{}:[]:g.value?e:"single"===r.value?Ae(e)||{}:e.filter((e=>!!Ae(e))).map((e=>Ae(e))),He=()=>{re.value=O(W,(e=>{e.length<w.value||!e&&0!==w.value||(ie.value=!0,C.value&&(se.value=[]),setTimeout((()=>{e==W.value&&i.value(W.value,H).then((a=>{e!=W.value&&W.value||(se.value=a,Q.value=pe.value.filter((e=>!0!==e[M.value]))[0]||null,ie.value=!1)})).catch((e=>{console.error(e)}))}),y.value))}),{flush:"sync"})};if("single"!==r.value&&!G(z.value)&&!Array.isArray(z.value))throw new Error(`v-model must be an array when using "${r.value}" mode`);return i&&"function"==typeof i.value?k.value?$e(Ne):1==g.value&&Ne():(se.value=i.value,Ne()),y.value>-1&&He(),O(y,((e,a)=>{re.value&&re.value(),e>=0&&He()})),O(z,(e=>{if(G(e))J(Ke(e),!1);else switch(r.value){case"single":(g.value?e[B.value]!=U.value[B.value]:e!=U.value[B.value])&&J(Ke(e),!1);break;case"multiple":case"tags":(function(e,a){const l=a.slice().sort();return e.length===a.length&&e.slice().sort().every((function(e,a){return e===l[a]}))})(g.value?e.map((e=>e[B.value])):e,U.value.map((e=>e[B.value])))||J(Ke(e),!1)}}),{deep:!0}),O(i,((a,l)=>{"function"==typeof e.options?k.value&&(!l||a&&a.toString()!==l.toString())&&$e():(se.value=e.options,Object.keys(U.value).length||Ne(),Me())})),O(p,Me),{pfo:ve,fo:pe,filteredOptions:pe,hasSelected:me,multipleLabelText:be,eo:ce,extendedOptions:ce,fg:de,filteredGroups:de,noOptions:fe,noResults:ge,resolving:ie,busy:xe,offset:ue,select:Se,deselect:_e,remove:Oe,selectAll:()=>{"single"!==r.value&&Se(pe.value)},clear:we,isSelected:Ee,isDisabled:Ce,isMax:Te,getOption:Ae,handleOptionClick:e=>{if(!Ce(e))return $&&$.value&&!Ee(e)&&e.__CREATE__&&(delete(e=u({},e)).__CREATE__,(e=$.value(e,H))instanceof Promise)?(ie.value=!0,void e.then((e=>{ie.value=!1,Be(e)}))):void Be(e)},handleGroupClick:e=>{if(!Ce(e)&&"single"!==r.value&&N.value){switch(r.value){case"multiple":case"tags":De(e[F.value])?_e(e[F.value]):Se(e[F.value].filter((e=>-1===U.value.map((e=>e[B.value])).indexOf(e[B.value]))).filter((e=>!e[M.value])).filter(((e,a)=>U.value.length+1+a<=D.value||-1===D.value)))}A.value&&ae()}},handleTagRemove:(e,a)=>{0===a.button?Oe(e):a.preventDefault()},refreshOptions:e=>{$e(e)},resolveOptions:$e,refreshLabels:Me}}function Q(e,a,l){const{valueProp:t,showOptions:s,searchable:i,groupLabel:r,groups:u,mode:n,groupSelect:o,disabledProp:c}=x(e),d=l.fo,v=l.fg,p=l.handleOptionClick,m=l.handleGroupClick,b=l.search,f=l.pointer,g=l.setPointer,h=l.clearPointer,y=l.multiselect,k=l.isOpen,S=L((()=>d.value.filter((e=>!e[c.value])))),_=L((()=>v.value.filter((e=>!e[c.value])))),E=L((()=>"single"!==n.value&&o.value)),C=L((()=>f.value&&f.value.group)),T=L((()=>V(f.value))),B=L((()=>{const e=C.value?f.value:V(f.value),a=_.value.map((e=>e[r.value])).indexOf(e[r.value]);let l=_.value[a-1];return void 0===l&&(l=D.value),l})),q=L((()=>{let e=_.value.map((e=>e.label)).indexOf(C.value?f.value[r.value]:V(f.value)[r.value])+1;return _.value.length<=e&&(e=0),_.value[e]})),D=L((()=>[..._.value].slice(-1)[0])),P=L((()=>f.value.__VISIBLE__.filter((e=>!e[c.value]))[0])),A=L((()=>{const e=T.value.__VISIBLE__.filter((e=>!e[c.value]));return e[e.map((e=>e[t.value])).indexOf(f.value[t.value])-1]})),I=L((()=>{const e=V(f.value).__VISIBLE__.filter((e=>!e[c.value]));return e[e.map((e=>e[t.value])).indexOf(f.value[t.value])+1]})),R=L((()=>[...B.value.__VISIBLE__.filter((e=>!e[c.value]))].slice(-1)[0])),j=L((()=>[...D.value.__VISIBLE__.filter((e=>!e[c.value]))].slice(-1)[0])),F=()=>{g(S.value[0]||null)},V=e=>_.value.find((a=>-1!==a.__VISIBLE__.map((e=>e[t.value])).indexOf(e[t.value]))),N=()=>{let e=y.value.querySelector("[data-pointed]");if(!e)return;let a=e.parentElement.parentElement;u.value&&(a=C.value?e.parentElement.parentElement.parentElement:e.parentElement.parentElement.parentElement.parentElement),e.offsetTop+e.offsetHeight>a.clientHeight+a.scrollTop&&(a.scrollTop=e.offsetTop+e.offsetHeight-a.clientHeight),e.offsetTop<a.scrollTop&&(a.scrollTop=e.offsetTop)};return O(b,(e=>{i.value&&(e.length&&s.value?F():h())})),O(k,(e=>{if(e){let e=y.value.querySelectorAll("[data-selected]")[0];if(!e)return;let a=e.parentElement.parentElement;w((()=>{a.scrollTop>0||(a.scrollTop=e.offsetTop)}))}})),{pointer:f,canPointGroups:E,isPointed:e=>!(!f.value||!(!e.group&&f.value[t.value]==e[t.value]||void 0!==e.group&&f.value[r.value]==e[r.value]))||void 0,setPointerFirst:F,selectPointer:()=>{f.value&&!0!==f.value[c.value]&&(C.value?m(f.value):p(f.value))},forwardPointer:()=>{if(null===f.value)g((u.value&&E.value?_.value[0]:S.value[0])||null);else if(u.value&&E.value){let e=C.value?P.value:I.value;void 0===e&&(e=q.value),g(e||null)}else{let e=S.value.map((e=>e[t.value])).indexOf(f.value[t.value])+1;S.value.length<=e&&(e=0),g(S.value[e]||null)}w((()=>{N()}))},backwardPointer:()=>{if(null===f.value){let e=S.value[S.value.length-1];u.value&&E.value&&(e=j.value,void 0===e&&(e=D.value)),g(e||null)}else if(u.value&&E.value){let e=C.value?R.value:A.value;void 0===e&&(e=C.value?B.value:T.value),g(e||null)}else{let e=S.value.map((e=>e[t.value])).indexOf(f.value[t.value])-1;e<0&&(e=S.value.length-1),g(S.value[e]||null)}w((()=>{N()}))}}}function X(e,a,l){const{disabled:t}=x(e),s=S().proxy,i=_(!1);return{isOpen:i,open:()=>{i.value||t.value||(i.value=!0,a.emit("open",s))},close:()=>{i.value&&(i.value=!1,a.emit("close",s))}}}function ee(e,a,l){const{searchable:t,disabled:s,clearOnBlur:i}=x(e),r=l.input,u=l.open,n=l.close,o=l.clearSearch,c=l.isOpen,d=_(null),v=_(null),p=_(null),m=_(!1),b=_(!1),f=L((()=>t.value||s.value?-1:0)),g=()=>{t.value&&r.value.blur(),v.value.blur()},h=(e=!0)=>{s.value||(m.value=!0,e&&u())},y=()=>{m.value=!1,setTimeout((()=>{m.value||(n(),i.value&&o())}),1)};return{multiselect:d,wrapper:v,tags:p,tabindex:f,isActive:m,mouseClicked:b,blur:g,focus:()=>{t.value&&!s.value&&r.value.focus()},activate:h,deactivate:y,handleFocusIn:e=>{e.target.closest("[data-tags]")&&"INPUT"!==e.target.nodeName||e.target.closest("[data-clear]")||h(b.value)},handleFocusOut:()=>{y()},handleCaretClick:()=>{y(),g()},handleMousedown:e=>{b.value=!0,c.value&&(e.target.isEqualNode(v.value)||e.target.isEqualNode(p.value))?setTimeout((()=>{y()}),0):document.activeElement.isEqualNode(v.value)&&!c.value&&h(),setTimeout((()=>{b.value=!1}),0)}}}function ae(e,a,l){const{mode:t,addTagOn:s,openDirection:i,searchable:r,showOptions:u,valueProp:n,groups:o,addOptionOn:c,createTag:d,createOption:v,reverse:p}=x(e),m=S().proxy,b=l.iv,f=l.update,g=l.search,h=l.setPointer,y=l.selectPointer,k=l.backwardPointer,_=l.forwardPointer,O=l.multiselect,w=l.wrapper,E=l.tags,C=l.isOpen,T=l.open,B=l.blur,q=l.fo,D=L((()=>d.value||v.value||!1)),P=L((()=>void 0!==s.value?s.value:void 0!==c.value?c.value:["enter"])),A=()=>{"tags"===t.value&&!u.value&&D.value&&r.value&&!o.value&&h(q.value[q.value.map((e=>e[n.value])).indexOf(g.value)])};return{handleKeydown:e=>{let l,s;switch(a.emit("keydown",e,m),-1!==["ArrowLeft","ArrowRight","Enter"].indexOf(e.key)&&"tags"===t.value&&(l=[...O.value.querySelectorAll("[data-tags] > *")].filter((e=>e!==E.value)),s=l.findIndex((e=>e===document.activeElement))),e.key){case"Backspace":if("single"===t.value)return;if(r.value&&-1===[null,""].indexOf(g.value))return;if(0===b.value.length)return;f([...b.value].slice(0,-1));break;case"Enter":if(e.preventDefault(),229===e.keyCode)return;if(-1!==s&&void 0!==s)return f([...b.value].filter(((e,a)=>a!==s))),void(s===l.length-1&&(l.length-1?l[l.length-2].focus():r.value?E.value.querySelector("input").focus():w.value.focus()));if(-1===P.value.indexOf("enter")&&D.value)return;A(),y();break;case" ":if(!D.value&&!r.value)return e.preventDefault(),A(),void y();if(!D.value)return!1;if(-1===P.value.indexOf("space")&&D.value)return;e.preventDefault(),A(),y();break;case"Tab":case";":case",":if(-1===P.value.indexOf(e.key.toLowerCase())||!D.value)return;A(),y(),e.preventDefault();break;case"Escape":B();break;case"ArrowUp":if(e.preventDefault(),!u.value)return;C.value||T(),k();break;case"ArrowDown":if(e.preventDefault(),!u.value)return;C.value||T(),_();break;case"ArrowLeft":if(r.value&&E.value&&E.value.querySelector("input").selectionStart||e.shiftKey||"tags"!==t.value||!b.value||!b.value.length)return;e.preventDefault(),-1===s?l[l.length-1].focus():s>0&&l[s-1].focus();break;case"ArrowRight":if(-1===s||e.shiftKey||"tags"!==t.value||!b.value||!b.value.length)return;e.preventDefault(),l.length>s+1?l[s+1].focus():r.value?E.value.querySelector("input").focus():r.value||w.value.focus()}},handleKeyup:e=>{a.emit("keyup",e,m)},preparePointer:A}}function le(e,a,l){const{classes:t,disabled:s,openDirection:i,showOptions:r}=x(e),n=l.isOpen,o=l.isPointed,c=l.isSelected,d=l.isDisabled,v=l.isActive,p=l.canPointGroups,m=l.resolving,b=l.fo,f=L((()=>u({container:"multiselect",containerDisabled:"is-disabled",containerOpen:"is-open",containerOpenTop:"is-open-top",containerActive:"is-active",wrapper:"multiselect-wrapper",singleLabel:"multiselect-single-label",singleLabelText:"multiselect-single-label-text",multipleLabel:"multiselect-multiple-label",search:"multiselect-search",tags:"multiselect-tags",tag:"multiselect-tag",tagDisabled:"is-disabled",tagRemove:"multiselect-tag-remove",tagRemoveIcon:"multiselect-tag-remove-icon",tagsSearchWrapper:"multiselect-tags-search-wrapper",tagsSearch:"multiselect-tags-search",tagsSearchCopy:"multiselect-tags-search-copy",placeholder:"multiselect-placeholder",caret:"multiselect-caret",caretOpen:"is-open",clear:"multiselect-clear",clearIcon:"multiselect-clear-icon",spinner:"multiselect-spinner",inifinite:"multiselect-inifite",inifiniteSpinner:"multiselect-inifite-spinner",dropdown:"multiselect-dropdown",dropdownTop:"is-top",dropdownHidden:"is-hidden",options:"multiselect-options",optionsTop:"is-top",group:"multiselect-group",groupLabel:"multiselect-group-label",groupLabelPointable:"is-pointable",groupLabelPointed:"is-pointed",groupLabelSelected:"is-selected",groupLabelDisabled:"is-disabled",groupLabelSelectedPointed:"is-selected is-pointed",groupLabelSelectedDisabled:"is-selected is-disabled",groupOptions:"multiselect-group-options",option:"multiselect-option",optionPointed:"is-pointed",optionSelected:"is-selected",optionDisabled:"is-disabled",optionSelectedPointed:"is-selected is-pointed",optionSelectedDisabled:"is-selected is-disabled",noOptions:"multiselect-no-options",noResults:"multiselect-no-results",fakeInput:"multiselect-fake-input",assist:"multiselect-assistive-text",spacer:"multiselect-spacer"},t.value))),g=L((()=>!!(n.value&&r.value&&(!m.value||m.value&&b.value.length))));return{classList:L((()=>{const e=f.value;return{container:[e.container].concat(s.value?e.containerDisabled:[]).concat(g.value&&"top"===i.value?e.containerOpenTop:[]).concat(g.value&&"top"!==i.value?e.containerOpen:[]).concat(v.value?e.containerActive:[]),wrapper:e.wrapper,spacer:e.spacer,singleLabel:e.singleLabel,singleLabelText:e.singleLabelText,multipleLabel:e.multipleLabel,search:e.search,tags:e.tags,tag:[e.tag].concat(s.value?e.tagDisabled:[]),tagRemove:e.tagRemove,tagRemoveIcon:e.tagRemoveIcon,tagsSearchWrapper:e.tagsSearchWrapper,tagsSearch:e.tagsSearch,tagsSearchCopy:e.tagsSearchCopy,placeholder:e.placeholder,caret:[e.caret].concat(n.value?e.caretOpen:[]),clear:e.clear,clearIcon:e.clearIcon,spinner:e.spinner,inifinite:e.inifinite,inifiniteSpinner:e.inifiniteSpinner,dropdown:[e.dropdown].concat("top"===i.value?e.dropdownTop:[]).concat(n.value&&r.value&&g.value?[]:e.dropdownHidden),options:[e.options].concat("top"===i.value?e.optionsTop:[]),group:e.group,groupLabel:a=>{let l=[e.groupLabel];return o(a)?l.push(c(a)?e.groupLabelSelectedPointed:e.groupLabelPointed):c(a)&&p.value?l.push(d(a)?e.groupLabelSelectedDisabled:e.groupLabelSelected):d(a)&&l.push(e.groupLabelDisabled),p.value&&l.push(e.groupLabelPointable),l},groupOptions:e.groupOptions,option:(a,l)=>{let t=[e.option];return o(a)?t.push(c(a)?e.optionSelectedPointed:e.optionPointed):c(a)?t.push(d(a)?e.optionSelectedDisabled:e.optionSelected):(d(a)||l&&d(l))&&t.push(e.optionDisabled),t},noOptions:e.noOptions,noResults:e.noResults,assist:e.assist,fakeInput:e.fakeInput}})),showDropdown:g}}function te(e,a,l){const{limit:t,infinite:s}=x(e),i=l.isOpen,r=l.offset,u=l.search,n=l.pfo,o=l.eo,c=_(null),d=_(null),v=L((()=>r.value<n.value.length)),p=e=>{const{isIntersecting:a,target:l}=e[0];if(a){const e=l.offsetParent,a=e.scrollTop;r.value+=-1==t.value?10:t.value,w((()=>{e.scrollTop=a}))}},m=()=>{i.value&&r.value<n.value.length?c.value.observe(d.value):!i.value&&c.value&&c.value.disconnect()};return O(i,(()=>{s.value&&m()})),O(u,(()=>{s.value&&(r.value=t.value,m())}),{flush:"post"}),O(o,(()=>{s.value&&m()}),{immediate:!1,flush:"post"}),E((()=>{window&&window.IntersectionObserver&&(c.value=new IntersectionObserver(p))})),{hasMore:v,infiniteLoader:d}}function se(e,a,l){const{placeholder:t,id:s,valueProp:i,label:r,mode:n,groupLabel:o,aria:c,searchable:d}=x(e),v=l.pointer,p=l.iv,m=l.hasSelected,b=l.multipleLabelText,f=_(null),g=L((()=>{let e=[];return s&&s.value&&e.push(s.value),e.push("assist"),e.join("-")})),h=L((()=>{let e=[];return s&&s.value&&e.push(s.value),e.push("multiselect-options"),e.join("-")})),y=L((()=>{let e=[];if(s&&s.value&&e.push(s.value),v.value)return e.push(v.value.group?"multiselect-group":"multiselect-option"),e.push(v.value.group?v.value.index:v.value[i.value]),e.join("-")})),k=L((()=>t.value)),S=L((()=>"single"!==n.value)),O=L((()=>{let e="";return"single"===n.value&&m.value&&(e+=p.value[r.value]),"multiple"===n.value&&m.value&&(e+=b.value),"tags"===n.value&&m.value&&(e+=p.value.map((e=>e[r.value])).join(", ")),e})),w=L((()=>{let e=u({},c.value);return d.value&&(e["aria-labelledby"]=e["aria-labelledby"]?`${g.value} ${e["aria-labelledby"]}`:g.value,O.value&&e["aria-label"]&&(e["aria-label"]=`${O.value}, ${e["aria-label"]}`)),e}));return E((()=>{if(s&&s.value&&document&&document.querySelector){let e=document.querySelector(`[for="${s.value}"]`);f.value=e?e.innerText:null}})),{arias:w,ariaLabel:O,ariaAssist:g,ariaControls:h,ariaPlaceholder:k,ariaMultiselectable:S,ariaActiveDescendant:y,ariaOptionId:e=>{let a=[];return s&&s.value&&a.push(s.value),a.push("multiselect-option"),a.push(e[i.value]),a.join("-")},ariaOptionLabel:e=>{let a=[];return a.push(e[r.value]),a.join(" ")},ariaGroupId:e=>{let a=[];return s&&s.value&&a.push(s.value),a.push("multiselect-group"),a.push(e.index),a.join("-")},ariaGroupLabel:e=>{let a=[];return a.push(e[o.value]),a.join(" ")},ariaTagLabel:e=>`${e} ❎`}}var ie={name:"Multiselect",emits:["paste","open","close","select","deselect","input","search-change","tag","option","update:modelValue","change","clear","keydown","keyup","max"],props:{value:{required:!1},modelValue:{required:!1},options:{type:[Array,Object,Function],required:!1,default:()=>[]},id:{type:[String,Number],required:!1},name:{type:[String,Number],required:!1,default:"multiselect"},disabled:{type:Boolean,required:!1,default:!1},label:{type:String,required:!1,default:"label"},trackBy:{type:String,required:!1,default:void 0},valueProp:{type:String,required:!1,default:"value"},placeholder:{type:String,required:!1,default:null},mode:{type:String,required:!1,default:"single"},searchable:{type:Boolean,required:!1,default:!1},limit:{type:Number,required:!1,default:-1},hideSelected:{type:Boolean,required:!1,default:!0},createTag:{type:Boolean,required:!1,default:void 0},createOption:{type:Boolean,required:!1,default:void 0},appendNewTag:{type:Boolean,required:!1,default:void 0},appendNewOption:{type:Boolean,required:!1,default:void 0},addTagOn:{type:Array,required:!1,default:void 0},addOptionOn:{type:Array,required:!1,default:void 0},caret:{type:Boolean,required:!1,default:!0},loading:{type:Boolean,required:!1,default:!1},noOptionsText:{type:String,required:!1,default:"The list is empty"},noResultsText:{type:String,required:!1,default:"No results found"},multipleLabel:{type:Function,required:!1},object:{type:Boolean,required:!1,default:!1},delay:{type:Number,required:!1,default:-1},minChars:{type:Number,required:!1,default:0},resolveOnLoad:{type:Boolean,required:!1,default:!0},filterResults:{type:Boolean,required:!1,default:!0},clearOnSearch:{type:Boolean,required:!1,default:!1},clearOnSelect:{type:Boolean,required:!1,default:!0},canDeselect:{type:Boolean,required:!1,default:!0},canClear:{type:Boolean,required:!1,default:!0},max:{type:Number,required:!1,default:-1},showOptions:{type:Boolean,required:!1,default:!0},required:{type:Boolean,required:!1,default:!1},openDirection:{type:String,required:!1,default:"bottom"},nativeSupport:{type:Boolean,required:!1,default:!1},classes:{type:Object,required:!1,default:()=>({})},strict:{type:Boolean,required:!1,default:!0},closeOnSelect:{type:Boolean,required:!1,default:!0},autocomplete:{type:String,required:!1},groups:{type:Boolean,required:!1,default:!1},groupLabel:{type:String,required:!1,default:"label"},groupOptions:{type:String,required:!1,default:"options"},groupHideEmpty:{type:Boolean,required:!1,default:!1},groupSelect:{type:Boolean,required:!1,default:!0},inputType:{type:String,required:!1,default:"text"},attrs:{required:!1,type:Object,default:()=>({})},onCreate:{required:!1,type:Function},disabledProp:{type:String,required:!1,default:"disabled"},searchStart:{type:Boolean,required:!1,default:!1},reverse:{type:Boolean,required:!1,default:!1},regex:{type:[Object,String,RegExp],required:!1,default:void 0},rtl:{type:Boolean,required:!1,default:!1},infinite:{type:Boolean,required:!1,default:!1},aria:{required:!1,type:Object,default:()=>({})},clearOnBlur:{required:!1,type:Boolean,default:!0}},setup:(e,a)=>function(e,a,l,t={}){return l.forEach((l=>{l&&(t=u(u({},t),l(e,a,t)))})),t}(e,a,[z,Y,X,W,U,ee,J,te,Q,ae,le,se])};const re=["id","dir"],ue=["tabindex","aria-controls","aria-placeholder","aria-expanded","aria-activedescendant","aria-multiselectable","role"],ne=["type","modelValue","value","autocomplete","id","aria-controls","aria-placeholder","aria-expanded","aria-activedescendant","aria-multiselectable"],oe=["onKeyup","aria-label"],ce=["onClick"],de=["type","modelValue","value","id","autocomplete","aria-controls","aria-placeholder","aria-expanded","aria-activedescendant","aria-multiselectable"],ve=["innerHTML"],pe=["id"],me=["id","aria-label","aria-selected"],be=["data-pointed","onMouseenter","onClick"],fe=["innerHTML"],ge=["aria-label"],he=["data-pointed","data-selected","onMouseenter","onClick","id","aria-selected","aria-label"],ye=["data-pointed","data-selected","onMouseenter","onClick","id","aria-selected","aria-label"],ke=["innerHTML"],xe=["innerHTML"],Se=["value"],_e=["name","value"],Le=["name","value"],Oe=["id"];ie.render=function(e,a,l,t,s,i){return n(),o("div",{ref:"multiselect",class:m(e.classList.container),id:l.searchable?void 0:l.id,dir:l.rtl?"rtl":void 0,onFocusin:a[10]||(a[10]=(...a)=>e.handleFocusIn&&e.handleFocusIn(...a)),onFocusout:a[11]||(a[11]=(...a)=>e.handleFocusOut&&e.handleFocusOut(...a)),onKeyup:a[12]||(a[12]=(...a)=>e.handleKeyup&&e.handleKeyup(...a)),onKeydown:a[13]||(a[13]=(...a)=>e.handleKeydown&&e.handleKeydown(...a))},[c("div",v({class:e.classList.wrapper,onMousedown:a[9]||(a[9]=(...a)=>e.handleMousedown&&e.handleMousedown(...a)),ref:"wrapper",tabindex:e.tabindex,"aria-controls":l.searchable?void 0:e.ariaControls,"aria-placeholder":l.searchable?void 0:e.ariaPlaceholder,"aria-expanded":l.searchable?void 0:e.isOpen,"aria-activedescendant":l.searchable?void 0:e.ariaActiveDescendant,"aria-multiselectable":l.searchable?void 0:e.ariaMultiselectable,role:l.searchable?void 0:"combobox"},l.searchable?{}:e.arias),[d(" Search "),"tags"!==l.mode&&l.searchable&&!l.disabled?(n(),o("input",v({key:0,type:l.inputType,modelValue:e.search,value:e.search,class:e.classList.search,autocomplete:l.autocomplete,id:l.searchable?l.id:void 0,onInput:a[0]||(a[0]=(...a)=>e.handleSearchInput&&e.handleSearchInput(...a)),onKeypress:a[1]||(a[1]=(...a)=>e.handleKeypress&&e.handleKeypress(...a)),onPaste:a[2]||(a[2]=p(((...a)=>e.handlePaste&&e.handlePaste(...a)),["stop"])),ref:"input","aria-controls":e.ariaControls,"aria-placeholder":e.ariaPlaceholder,"aria-expanded":e.isOpen,"aria-activedescendant":e.ariaActiveDescendant,"aria-multiselectable":e.ariaMultiselectable,role:"combobox"},u(u({},l.attrs),e.arias)),null,16,ne)):d("v-if",!0),d(" Tags (with search) "),"tags"==l.mode?(n(),o("div",{key:1,class:m(e.classList.tags),"data-tags":""},[(n(!0),o(b,null,f(e.iv,((a,t,s)=>g(e.$slots,"tag",{option:a,handleTagRemove:e.handleTagRemove,disabled:l.disabled},(()=>[(n(),o("span",{class:m(e.classList.tag),tabindex:"-1",onKeyup:h((l=>e.handleTagRemove(a,l)),["enter"]),key:s,"aria-label":e.ariaTagLabel(a[l.label])},[y(k(a[l.label])+" ",1),l.disabled?d("v-if",!0):(n(),o("span",{key:0,class:m(e.classList.tagRemove),onClick:p((l=>e.handleTagRemove(a,l)),["stop"])},[c("span",{class:m(e.classList.tagRemoveIcon)},null,2)],10,ce))],42,oe))])))),256)),c("div",{class:m(e.classList.tagsSearchWrapper),ref:"tags"},[d(" Used for measuring search width "),c("span",{class:m(e.classList.tagsSearchCopy)},k(e.search),3),d(" Actual search input "),l.searchable&&!l.disabled?(n(),o("input",v({key:0,type:l.inputType,modelValue:e.search,value:e.search,class:e.classList.tagsSearch,id:l.searchable?l.id:void 0,autocomplete:l.autocomplete,onInput:a[3]||(a[3]=(...a)=>e.handleSearchInput&&e.handleSearchInput(...a)),onKeypress:a[4]||(a[4]=(...a)=>e.handleKeypress&&e.handleKeypress(...a)),onPaste:a[5]||(a[5]=p(((...a)=>e.handlePaste&&e.handlePaste(...a)),["stop"])),ref:"input","aria-controls":e.ariaControls,"aria-placeholder":e.ariaPlaceholder,"aria-expanded":e.isOpen,"aria-activedescendant":e.ariaActiveDescendant,"aria-multiselectable":e.ariaMultiselectable,role:"combobox"},u(u({},l.attrs),e.arias)),null,16,de)):d("v-if",!0)],2)],2)):d("v-if",!0),d(" Single label "),"single"==l.mode&&e.hasSelected&&!e.search&&e.iv?g(e.$slots,"singlelabel",{key:2,value:e.iv},(()=>[c("div",{class:m(e.classList.singleLabel)},[c("span",{class:m(e.classList.singleLabelText)},k(e.iv[l.label]),3)],2)])):d("v-if",!0),d(" Multiple label "),"multiple"==l.mode&&e.hasSelected&&!e.search?g(e.$slots,"multiplelabel",{key:3,values:e.iv},(()=>[c("div",{class:m(e.classList.multipleLabel),innerHTML:e.multipleLabelText},null,10,ve)])):d("v-if",!0),d(" Placeholder "),!l.placeholder||e.hasSelected||e.search?d("v-if",!0):g(e.$slots,"placeholder",{key:4},(()=>[c("div",{class:m(e.classList.placeholder),"aria-hidden":"true"},k(l.placeholder),3)])),d(" Spinner "),l.loading||e.resolving?g(e.$slots,"spinner",{key:5},(()=>[c("span",{class:m(e.classList.spinner),"aria-hidden":"true"},null,2)])):d("v-if",!0),d(" Clear "),e.hasSelected&&!l.disabled&&l.canClear&&!e.busy?g(e.$slots,"clear",{key:6,clear:e.clear},(()=>[c("span",{"aria-hidden":"true",tabindex:"0",role:"button","data-clear":"","aria-roledescription":"❎",class:m(e.classList.clear),onClick:a[6]||(a[6]=(...a)=>e.clear&&e.clear(...a)),onKeyup:a[7]||(a[7]=h(((...a)=>e.clear&&e.clear(...a)),["enter"]))},[c("span",{class:m(e.classList.clearIcon)},null,2)],34)])):d("v-if",!0),d(" Caret "),l.caret&&l.showOptions?g(e.$slots,"caret",{key:7},(()=>[c("span",{class:m(e.classList.caret),onClick:a[8]||(a[8]=(...a)=>e.handleCaretClick&&e.handleCaretClick(...a)),"aria-hidden":"true"},null,2)])):d("v-if",!0)],16,ue),d(" Options "),c("div",{class:m(e.classList.dropdown),tabindex:"-1"},[g(e.$slots,"beforelist",{options:e.fo}),c("ul",{class:m(e.classList.options),id:e.ariaControls,role:"listbox"},[l.groups?(n(!0),o(b,{key:0},f(e.fg,((a,t,s)=>(n(),o("li",{class:m(e.classList.group),key:s,id:e.ariaGroupId(a),"aria-label":e.ariaGroupLabel(a),"aria-selected":e.isSelected(a),role:"option"},[c("div",{class:m(e.classList.groupLabel(a)),"data-pointed":e.isPointed(a),onMouseenter:l=>e.setPointer(a,t),onClick:l=>e.handleGroupClick(a)},[g(e.$slots,"grouplabel",{group:a,isSelected:e.isSelected,isPointed:e.isPointed},(()=>[c("span",{innerHTML:a[l.groupLabel]},null,8,fe)]))],42,be),c("ul",{class:m(e.classList.groupOptions),"aria-label":e.ariaGroupLabel(a),role:"group"},[(n(!0),o(b,null,f(a.__VISIBLE__,((t,s,i)=>(n(),o("li",{class:m(e.classList.option(t,a)),"data-pointed":e.isPointed(t),"data-selected":e.isSelected(t)||void 0,key:i,onMouseenter:a=>e.setPointer(t),onClick:a=>e.handleOptionClick(t),id:e.ariaOptionId(t),"aria-selected":e.isSelected(t),"aria-label":e.ariaOptionLabel(t),role:"option"},[g(e.$slots,"option",{option:t,isSelected:e.isSelected,isPointed:e.isPointed,search:e.search},(()=>[c("span",null,k(t[l.label]),1)]))],42,he)))),128))],10,ge)],10,me)))),128)):(n(!0),o(b,{key:1},f(e.fo,((a,t,s)=>(n(),o("li",{class:m(e.classList.option(a)),"data-pointed":e.isPointed(a),"data-selected":e.isSelected(a)||void 0,key:s,onMouseenter:l=>e.setPointer(a),onClick:l=>e.handleOptionClick(a),id:e.ariaOptionId(a),"aria-selected":e.isSelected(a),"aria-label":e.ariaOptionLabel(a),role:"option"},[g(e.$slots,"option",{option:a,isSelected:e.isSelected,isPointed:e.isPointed,search:e.search},(()=>[c("span",null,k(a[l.label]),1)]))],42,ye)))),128))],10,pe),e.noOptions?g(e.$slots,"nooptions",{key:0},(()=>[c("div",{class:m(e.classList.noOptions),innerHTML:l.noOptionsText},null,10,ke)])):d("v-if",!0),e.noResults?g(e.$slots,"noresults",{key:1},(()=>[c("div",{class:m(e.classList.noResults),innerHTML:l.noResultsText},null,10,xe)])):d("v-if",!0),l.infinite&&e.hasMore?(n(),o("div",{key:2,class:m(e.classList.inifinite),ref:"infiniteLoader"},[g(e.$slots,"infinite",{},(()=>[c("span",{class:m(e.classList.inifiniteSpinner)},null,2)]))],2)):d("v-if",!0),g(e.$slots,"afterlist",{options:e.fo})],2),d(" Hacky input element to show HTML5 required warning "),l.required?(n(),o("input",{key:0,class:m(e.classList.fakeInput),tabindex:"-1",value:e.textValue,required:""},null,10,Se)):d("v-if",!0),d(" Native input support "),l.nativeSupport?(n(),o(b,{key:1},["single"==l.mode?(n(),o("input",{key:0,type:"hidden",name:l.name,value:void 0!==e.plainValue?e.plainValue:""},null,8,_e)):(n(!0),o(b,{key:1},f(e.plainValue,((e,a)=>(n(),o("input",{type:"hidden",name:`${l.name}[]`,value:e,key:a},null,8,Le)))),128))],64)):d("v-if",!0),d(" Screen reader assistive text "),l.searchable&&e.hasSelected?(n(),o("div",{key:2,class:m(e.classList.assist),id:e.ariaAssist,"aria-hidden":"true"},k(e.ariaLabel),11,Oe)):d("v-if",!0),d(" Create height for empty input "),c("div",{class:m(e.classList.spacer)},null,2)],42,re)},ie.__file="src/Multiselect.vue";const we={class:"container d-flex flex-column h-100 py-2"},Ee={class:"card card-shadow justify-content-between align-items-center flex-grow-0 mb-2 p-2"},Ce={class:"fw-bold mb-1"},Te={class:"mb-1"},Be={class:"d-flex justify-content-evenly"},qe=c("i",{class:"bi bi-hdd"},null,-1),De=c("i",{class:"bi bi-play-circle pe-2"},null,-1),Pe=c("i",{class:"bi bi-stop-circle pe-2"},null,-1),Ae=c("i",{class:"bi bi-trash pe-2"},null,-1),Ie={class:"row flex-grow-1"},Re={class:"col-md-8 h-100"},je={class:"card card-shadow bg-black h-100"},Fe={class:"d-flex card-body flex-column h-100"},Ve=c("nav",{class:"flex-grow-0 mb-2"},[c("div",{class:"nav nav-tabs",role:"tablist"},[c("button",{class:"nav-link active px-2 py-1",type:"button","data-bs-toggle":"tab","data-bs-target":"#nav-mqtt",role:"tab"},"mqtt"),c("button",{class:"nav-link xxxxxx px-2 py-1",type:"button","data-bs-toggle":"tab","data-bs-target":"#nav-report",role:"tab"},"report"),c("button",{class:"nav-link xxxxxx px-2 py-1",type:"button","data-bs-toggle":"tab","data-bs-target":"#nav-stdout",role:"tab"},"stdout"),c("button",{class:"nav-link xxxxxx px-2 py-1",type:"button","data-bs-toggle":"tab","data-bs-target":"#nav-stderr",role:"tab"},"stderr"),c("button",{class:"nav-link xxxxxx px-2 py-1",type:"button","data-bs-toggle":"tab","data-bs-target":"#nav-logs",role:"tab"},"logs")])],-1),Ne={class:"tab-content flex-grow-1"},$e=[c("i",{class:"bi bi-arrow-repeat"},null,-1)],Me={class:"col-md-4 h-100"},Ke={class:"mb-2"},He=c("label",{class:"form-label mb-0",for:"AF1336E1_C8D2_1E01_01E5_DE3F80E84429"},"Server name",-1),Ge=["disabled"],Ue={class:"mb-2"},ze=c("label",{class:"form-label mb-0",for:"CB44C0E8_7AF4_58E7_4068_70DE447397C8"},"Task name",-1),We=["disabled"],Ye={class:"mb-2"},Ze=c("label",{class:"form-label mb-0",for:"D38988C8_5999_7C00_5535_2DBCFDEB0082"},"Description",-1),Je=["disabled"],Qe={class:"mb-2"},Xe=c("label",{class:"form-label mb-0",for:"A8D0F43E_4250_43E1_B3CC_B0E1B738A8AD"},"Command",-1),ea=["disabled"],aa={class:"row"},la={class:"col-md-6"},ta={class:"mb-2"},sa=c("label",{class:"form-label mb-0",for:"C9575CE7_A9B6_4C55_0C2C_DDE38DBFFAD8"},"Priority [> 0]",-1),ia=["disabled"],ra={class:"col-md-6"},ua={class:"mb-2"},na=c("label",{class:"form-label mb-0",for:"A26B8A73_B532_09F8_83B6_7C3C8F5D3F0A"},"Time step [s]",-1),oa=["disabled"],ca={class:"mb-2"},da=c("label",{class:"form-label mb-0",for:"E9035575_B614_A5FE_BF37_1A25708ED6A2"},"Exclusion locks",-1),va={class:"row"},pa={class:"col-md-8"},ma={class:"form-check form-switch form-switch-lg"},ba=["checked","disabled"],fa={class:"form-check-label ms-1 my-2",for:"B7B2E423_9A7B_8899_7DE9_0F1CBCB9E28C"},ga={class:"col-md-4"},ha={class:"d-flex justify-content-end"},ya=["disabled"],ka=c("i",{class:"bi bi-check-lg"},null,-1),xa={__name:"TaskView",setup(e){const a=C(),l=T("toast"),t=T("mqttClient"),s=B({isLoading:!0,task:{},serverValues:[]});let i=null,r=null,u=null,d=null,v=null;E((()=>{return e=this,n=null,o=function*(){const e=(e,t)=>{e.execute("ListTasks -id=?",{params:[a.params.id]}).then((a=>{const l=K(e.jspath("..row",a.data))[0];t?(s.task.report=l.report,s.task.stdout=l.stdout,s.task.stderr=l.stderr):(s.task=l,s.task.locks=l.commaSeparatedLocks.split(",").filter((e=>e.trim()))),r.clear(),r.write(`${(s.task.report||"@EMPTY").trim()}\n`),u.clear(),u.write(`${(s.task.stdout||"@EMPTY").trim()}\n`),d.clear(),d.write(`${(s.task.stderr||"@EMPTY").trim()}\n`)})).catch((e=>{l("error",`Error listing tasks: ${e.message}`)})).finally((()=>{s.isLoading=!1})),t||(e.execute("ListTaskServers").then((a=>{s.serverValues=K(e.jspath("..row",a.data))})).catch((e=>{l("error",`Error listing servers: ${e.message}`)})),e.subscribe("ami/taskserver/task"))};t.connect(e,((l,t,r)=>{if("ami/taskserver/task"===t){const u=JSON.parse(r);a.params.id===u.task_id.toString()&&(s.task.running=u.state_code.toString(),s.task.success=u.success?"1":"0",i.write(`[32m${t}[0m: `+r.replace('"RUNNING"','"[92;1mRUNNING[0m"').replace('"PENDING"','"[94;1mPENDING[0m"').replace('"ZOMBIE"','"[90;1mZOMBIE[0m"')+"\n\n"),"PENDING"!==u.state&&"ZOMBIE"!==u.state||e(l,!0))}}),null).catch((e=>{l("error",e)}))},new Promise(((a,l)=>{var t=e=>{try{i(o.next(e))}catch(a){l(a)}},s=e=>{try{i(o.throw(e))}catch(a){l(a)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(t,s);i((o=o.apply(e,n)).next())}));var e,n,o}));const m=()=>{v.write("TODO\n")},g=()=>{t.execute("ForceStartTask -id=?",{params:[s.task.id]}).then((()=>{l("success","Successfully started task")})).catch((e=>{l("error",`Error starting the task: ${e.message}`)}))},h=()=>{t.execute("KillTask -id=?",{params:[s.task.id]}).then((()=>{l("success","Successfully killed task")})).catch((e=>{l("error",`Error killing the task: ${e.message}`)}))},x=()=>{t.execute("RemoveTask -id=?",{params:[s.task.id]}).then((()=>{V.push(`/server/${s.task.serverName}/tasks`),l("success","Successfully removed task")})).catch((e=>{l("error",`Error removing the task: ${e.message}`)}))},S=()=>{t.execute("UpdateTask -id=? -name=? -description=? -command=? -priority=? -timeStep=? -serverName=? -commaSeparatedLocks=?",{params:[s.task.id,s.task.name,s.task.description,s.task.command,s.task.priority,s.task.timeStep,s.task.serverName,s.task.locks.join(",")]}).then((()=>{l("success","Successfully updated task")})).catch((e=>{l("error",`Error updating the task: ${e.message}`)}))};return(e,a)=>{const _=q("router-link");return n(),o("div",we,[c("div",Ee,[c("h1",Ce,[y(" Task "+k(s.task.name||"N/A")+" ",1),D($,{"is-loading":s.isLoading,locked:s.task.locked,running:s.task.running,label:!1},null,8,["is-loading","locked","running"])]),c("div",Te,[c("small",null,[y(" Last start date: "+k(s.task.lastStartDate)+" - Last stop date: "+k(s.task.lastStopDate)+" - ",1),D(M,{"is-loading":s.isLoading,running:s.task.running,success:s.task.success,label:!0},null,8,["is-loading","running","success"])])]),c("div",Be,[D(_,{class:"btn btn-sm btn-primary me-3",to:`/server/${s.task.serverName}/tasks`},{default:P((()=>[qe,y(" View server ")])),_:1},8,["to"]),D(A(H),{class:"me-3",buttonColor:"primary","modal-icon":"question-circle","modal-title":"Are you sure you want to start this task","button-size":"sm","button-outline":"1"===s.task.running,"button-disabled":s.isLoading||"1"===s.task.running,onConfirm:g},{textDescription:P((()=>[y(' This will start the task "'+k(s.task.name)+'", are you sure? ',1)])),default:P((()=>[De,y(" Start task ")])),_:1},8,["button-outline","button-disabled"]),D(A(H),{class:"me-3",buttonColor:"danger","modal-icon":"question-circle","modal-title":"Are you sure you want to kill this task","button-size":"sm","button-outline":"1"!==s.task.running,"button-disabled":s.isLoading||"1"!==s.task.running,onConfirm:h},{textDescription:P((()=>[y(' This will stop the task "'+k(s.task.name)+'", are you sure? ',1)])),default:P((()=>[Pe,y(" Kill task ")])),_:1},8,["button-outline","button-disabled"]),D(A(H),{class:"me-0",buttonColor:"danger","modal-icon":"question-circle","modal-title":"Are you sure you want to remove this task","button-size":"sm","button-outline":"1"===s.task.running,"button-disabled":s.isLoading||"1"===s.task.running,onConfirm:x},{textDescription:P((()=>[y(' This will remove the task "'+k(s.task.name)+'" from the database, are you sure? ',1)])),default:P((()=>[Ae,y(" Remove task ")])),_:1},8,["button-outline","button-disabled"])])]),c("div",Ie,[c("div",Re,[c("div",je,[c("div",Fe,[Ve,c("div",Ne,[D(A(N),{id:"nav-mqtt",active:!0,clear:!0,onReady:a[0]||(a[0]=e=>I(i)?i.value=e:i=e)}),D(A(N),{id:"nav-report",active:!1,clear:!1,onReady:a[1]||(a[1]=e=>I(r)?r.value=e:r=e)}),D(A(N),{id:"nav-stdout",active:!1,clear:!1,onReady:a[2]||(a[2]=e=>I(u)?u.value=e:u=e)}),D(A(N),{id:"nav-stderr",active:!1,clear:!1,onReady:a[3]||(a[3]=e=>I(d)?d.value=e:d=e)}),D(A(N),{id:"nav-logs",active:!1,clear:!1,onReady:a[4]||(a[4]=e=>I(v)?v.value=e:v=e)},{default:P((()=>[c("button",{class:"btn btn-outline-primary me-2",type:"button",onClick:m},$e)])),_:1})])])])]),c("div",Me,[c("form",{class:"h-100",onSubmit:a[13]||(a[13]=p((()=>{}),["prevent"]))},[c("div",Ke,[He,R(c("select",{class:"form-select form-select-sm","onUpdate:modelValue":a[5]||(a[5]=e=>s.task.serverName=e),disabled:s.isLoading,id:"AF1336E1_C8D2_1E01_01E5_DE3F80E84429"},[(n(!0),o(b,null,f(s.serverValues,(e=>(n(),o("option",{key:e.id},k(e.name),1)))),128))],8,Ge),[[j,s.task.serverName]])]),c("div",Ue,[ze,R(c("input",{class:"form-control form-control-sm",type:"text","onUpdate:modelValue":a[6]||(a[6]=e=>s.task.name=e),disabled:s.isLoading,id:"CB44C0E8_7AF4_58E7_4068_70DE447397C8"},null,8,We),[[F,s.task.name]])]),c("div",Ye,[Ze,R(c("input",{class:"form-control form-control-sm",type:"text","onUpdate:modelValue":a[7]||(a[7]=e=>s.task.description=e),disabled:s.isLoading,id:"D38988C8_5999_7C00_5535_2DBCFDEB0082"},null,8,Je),[[F,s.task.description]])]),c("div",Qe,[Xe,R(c("textarea",{class:"form-control form-control-sm",rows:"6","onUpdate:modelValue":a[8]||(a[8]=e=>s.task.command=e),disabled:s.isLoading,id:"A8D0F43E_4250_43E1_B3CC_B0E1B738A8AD"},null,8,ea),[[F,s.task.command]])]),c("div",aa,[c("div",la,[c("div",ta,[sa,R(c("input",{class:"form-control form-control-sm",type:"number",min:"0","onUpdate:modelValue":a[9]||(a[9]=e=>s.task.priority=e),disabled:s.isLoading,id:"C9575CE7_A9B6_4C55_0C2C_DDE38DBFFAD8"},null,8,ia),[[F,s.task.priority]])])]),c("div",ra,[c("div",ua,[na,R(c("input",{class:"form-control form-control-sm",type:"number",min:"0","onUpdate:modelValue":a[10]||(a[10]=e=>s.task.timeStep=e),disabled:s.isLoading,id:"A26B8A73_B532_09F8_83B6_7C3C8F5D3F0A"},null,8,oa),[[F,s.task.timeStep]])])])]),c("div",ca,[da,D(A(ie),{mode:"tags",modelValue:s.task.locks,"onUpdate:modelValue":a[11]||(a[11]=e=>s.task.locks=e),value:s.task.locks,options:s.task.locks,searchable:!0,"create-option":!0,"close-on-select":!1,"resolve-on-load":!1,disabled:s.isLoading,id:"E9035575_B614_A5FE_BF37_1A25708ED6A2"},null,8,["modelValue","value","options","disabled"])]),c("div",va,[c("div",pa,[c("div",ma,[c("input",{class:"form-check-input",type:"checkbox",role:"switch",onChange:a[12]||(a[12]=e=>{return a=e.target.checked?"1":"0",void t.execute("UpdateTask -id=? -locked=?",{params:[s.task.id,a]}).then((()=>{s.task.locked=a,l("success","Successfully updated task")})).catch((e=>{l("error",`Error updating the task: ${e.message}`)}));var a}),checked:"1"===s.task.locked,disabled:s.isLoading,id:"B7B2E423_9A7B_8899_7DE9_0F1CBCB9E28C"},null,40,ba),c("label",fa,k("1"===s.task.locked?"Task is locked":"Task is unlocked"),1)])]),c("div",ga,[c("div",ha,[c("button",{class:"btn btn-success",type:"button",onClick:S,disabled:s.isLoading},[ka,y(" Update ")],8,ya)])])])],32)])])])}}};export{xa as default};
